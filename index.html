<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visualizador de Nota Fiscal XML</title>
  <!-- Link para o Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Estilos globais para o corpo da página e variáveis de cor */
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f8f9fa; /* Fundo cinza claro */
      color: #333; /* Cor de texto padrão */
      display: flex; /* Usar flexbox para o layout principal */
      flex-direction: column; /* Conteúdo em coluna */
      min-height: 100vh; /* Ocupa a altura total da viewport */
    }

    :root {
      --primary-orange: #f26522; /* Laranja principal */
      --primary-blue: #003366; /* Azul principal */
    }

    /* Estilos para títulos */
    h1, h4, h5 {
      font-weight: 600; /* Negrito */
      color: var(--primary-blue); /* Cor azul */
    }

    /* Estilos para o cabeçalho do card */
    .card-header {
      background-color: var(--primary-orange); /* Fundo laranja */
      color: white; /* Texto branco */
      font-weight: 500;
      border-bottom: 2px solid var(--primary-blue); /* Borda inferior azul */
    }

    /* Estilos para todos os cards */
    .card {
      border: 2px solid #adb5bd; /* Borda cinza mais escura */
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); /* Sombra suave */
      border-radius: 8px; /* Bordas arredondadas */
    }

    /* Estilo para a sobreposição do loader (indicador de carregamento) */
    .loader-overlay {
      position: fixed; /* Fixado na tela */
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7); /* Fundo semi-transparente */
      z-index: 9999; /* Acima de tudo */
      display: none; /* ESCONDIDO POR PADRÃO */
      flex-direction: column; /* Conteúdo em coluna */
      justify-content: center; /* Centraliza verticalmente */
      align-items: center; /* Centraliza horizontalmente */
      border-radius: 8px; /* Bordas arredondadas */
    }
    .loader {
      border: 8px solid #f3f3f3; /* Borda cinza clara */
      border-top: 8px solid var(--primary-orange); /* Borda superior laranja (para o spinner) */
      border-radius: 50%; /* Faz um círculo */
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite; /* Animação de rotação */
    }
    .loader-text {
      color: white; /* Texto branco */
      margin-top: 10px; /* Espaço entre o spinner e o texto */
      font-size: 1rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Estilos para a seção de upload de arquivo */
    #upload-section {
      display: flex; /* Flexbox para centralizar conteúdo */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80vh; /* Ocupa a maior parte da altura da viewport */
      padding: 20px;
      text-align: center;
      flex-grow: 1; /* Permite que esta seção ocupe o espaço disponível */
    }

    #upload-section .logo {
      max-width: 150px; /* Largura máxima do logo */
      height: auto; /* Mantém a proporção da imagem */
      margin-bottom: 15px;
      border-radius: 8px; /* Bordas arredondadas para o logo */
    }

    #upload-section .brand {
      font-size: 1.1rem;
      color: var(--primary-blue);
      font-weight: bold;
      margin-bottom: 5px;
    }

    #upload-section h1 {
      font-size: 1.8rem;
      margin-bottom: 30px;
      color: var(--primary-blue);
    }

    .custom-file {
      position: relative;
      display: inline-block;
      width: 100%;
      max-width: 300px; /* Limita a largura do campo de arquivo */
      margin-bottom: 20px;
    }

    #fileInput {
      display: none; /* Oculta o input de arquivo nativo */
    }

    .custom-label {
      display: block; /* Ocupa a largura total disponível */
      background-color: var(--primary-orange); /* Fundo laranja */
      color: white; /* Texto branco */
      padding: 12px 20px;
      border-radius: 8px; /* Bordas arredondadas */
      text-align: center;
      cursor: pointer; /* Cursor de ponteiro */
      transition: background-color 0.3s ease, transform 0.2s ease; /* Transições suaves */
      font-weight: 600;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1); /* Sombra para profundidade */
    }

    .custom-label:hover {
      background-color: #e05b1e; /* Laranja mais escuro no hover */
      transform: translateY(-2px); /* Efeito de "levantar" no hover */
    }

    /* Estilos para a seção do visualizador de NF-e */
    #viewer-section {
      display: none; /* Escondido por padrão, será exibido via JS */
      padding: 20px;
      flex-grow: 1; /* Permite que esta seção ocupe o espaço disponível */
    }

    /* Estilos para os itens da lista de produtos */
    #productList .list-group-item {
      cursor: pointer;
      border: 1px solid #dee2e6;
      transition: background-color 0.2s ease, border-color 0.2s ease;
      color: #333;
      border-radius: 5px; /* Bordas arredondadas */
      margin-bottom: 5px; /* Espaçamento entre os itens */
    }

    #productList .list-group-item:hover {
      background-color: #eef3f8; /* Azul claro no hover */
      border-left: 4px solid var(--primary-blue); /* Borda esquerda azul no hover */
    }

    #productList .list-group-item.active {
      background-color: var(--primary-blue) !important; /* Fundo azul quando ativo */
      border-color: var(--primary-blue) !important; /* Borda azul quando ativo */
      color: #fff; /* Texto branco quando ativo */
    }

    /* Estilos para os detalhes do produto */
    #productDetails {
      font-size: 0.95rem;
      line-height: 1.6;
      background-color: #fff;
    }

    #productDetails p {
      margin-bottom: 0.5rem;
    }

    hr {
      margin: 1rem 0;
      border-top: 1px solid #ccc;
    }

    /* Estilo para o botão de voltar */
    .btn-back-to-upload {
        margin-top: 20px;
        background-color: var(--primary-blue);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        transition: background-color 0.3s ease;
    }

    .btn-back-to-upload:hover {
        background-color: #002244; /* Azul mais escuro no hover */
    }

    /* Estilos para o botão de Gerar DANFE */
    .btn-generate-danfe {
        margin-top: 20px;
        background-color: #28a745; /* Verde para o botão de gerar */
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 20px;
        transition: background-color 0.3s ease;
        margin-left: 10px; /* Espaçamento entre os botões */
    }

    .btn-generate-danfe:hover {
        background-color: #218838; /* Verde mais escuro no hover */
    }

    /* Estilos para o modal de erro personalizado */
    .error-modal {
      display: none; /* Escondido por padrão */
      position: fixed; /* Fixado na tela */
      top: 0;
      left: 0;
      width: 100%; /* Largura total */
      height: 100%; /* Altura total */
      overflow: auto; /* Permite rolagem se o conteúdo for grande */
      background-color: rgba(0,0,0,0.4); /* Fundo semi-transparente */
      justify-content: center; /* Centraliza horizontalmente */
      align-items: center; /* Centraliza verticalmente */
      z-index: 10000; /* Acima de tudo */
    }

    .error-modal-content {
      background-color: #fefefe; /* Fundo branco */
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 500px; /* Largura máxima */
      border-radius: 10px; /* Bordas arredondadas */
      box-shadow: 0 5px 15px rgba(0,0,0,0.3); /* Sombra */
      text-align: center;
    }

    .error-modal-content h2 {
      color: var(--primary-orange); /* Título laranja */
      margin-bottom: 15px;
    }

    .error-modal-content p {
      margin-bottom: 20px;
    }

    .error-modal-close-btn {
      background-color: var(--primary-blue); /* Fundo azul */
      color: white; /* Texto branco */
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.3s ease;
    }

    .error-modal-close-btn:hover {
      background-color: #002244; /* Azul mais escuro no hover */
    }

    /* Estilos para as novas seções de conteúdo que são ocultáveis */
    .content-section {
      display: none; /* Escondido por padrão */
      padding: 40px 20px;
      flex-grow: 1; /* Permite que ocupe o espaço disponível */
    }

    .content-section h1 {
      margin-bottom: 30px;
      text-align: center;
    }

    .content-section p {
      margin-bottom: 15px;
      text-align: justify;
    }

    .content-section ul {
        list-style-type: disc;
        margin-left: 20px;
        margin-bottom: 15px;
    }

    .content-section ul li {
        margin-bottom: 8px;
    }

    /* Estilos para a seção de conteúdo principal (agora dentro de upload-section) */
    #main-info-content {
        padding: 40px 20px;
        text-align: center; /* Centraliza o título */
        width: 100%; /* Ocupa a largura total dentro do flex container */
        max-width: 800px; /* Limita a largura para melhor leitura */
        margin-top: 40px; /* Espaçamento do botão de upload */
    }

    #main-info-content h1 {
        margin-bottom: 30px;
        color: var(--primary-blue);
    }

    #main-info-content h2 {
        color: var(--primary-orange);
        margin-top: 25px;
        margin-bottom: 15px;
        text-align: left;
    }

    #main-info-content p {
        margin-bottom: 15px;
        text-align: justify;
    }

    #main-info-content ul {
        list-style-type: disc;
        margin-left: 20px;
        margin-bottom: 15px;
        text-align: left;
    }

    #main-info-content ul li {
        margin-bottom: 8px;
    }

    /* Estilos para o novo quadro de descrição da ferramenta */
    #tool-description-card {
        max-width: 800px; /* Mesma largura do conteúdo principal */
        width: 100%;
        margin-top: 30px; /* Espaçamento do input de arquivo */
        text-align: left; /* Alinha o texto dentro do card */
    }

    #tool-description-card h2 {
        color: var(--primary-blue);
        margin-bottom: 15px;
        text-align: center; /* Centraliza o título do quadro */
    }

    /* Estilos para o rodapé */
    .footer {
      background-color: var(--primary-blue);
      color: white;
      padding: 20px 15px;
      text-align: center;
      font-size: 0.9rem;
      margin-top: auto; /* Empurra o rodapé para o final da página */
    }

    .footer a {
      color: white;
      text-decoration: none;
      margin: 0 10px;
      transition: text-decoration 0.3s ease;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Responsividade para telas menores */
    @media (max-width: 768px) {
      #upload-section h1 {
        font-size: 1.5rem;
      }
      .custom-label {
        padding: 10px 15px;
        font-size: 0.9rem;
      }
      .card-header {
        font-size: 1rem;
      }
      #productDetails, #productList .list-group-item {
        font-size: 0.85rem;
      }
      .footer a {
          display: block;
          margin: 5px 0;
      }
    }
  </style>
</head>
<body>
  <!-- Sobreposição do Loader -->
  <div class="loader-overlay" id="loaderOverlay">
    <div class="loader"></div>
    <p id="loaderText" class="loader-text">Carregando...</p>
  </div>

  <!-- Modal de Erro -->
  <div id="errorModal" class="error-modal">
    <div class="error-modal-content">
      <h2 id="errorModalTitle">Erro!</h2>
      <p id="errorModalMessage"></p>
      <button id="errorModalCloseBtn" class="error-modal-close-btn">Fechar</button>
    </div>
  </div>

  <!-- Seção de Upload de Arquivo -->
  <div id="upload-section">
    <!-- Imagem de logo -->
    <img src="logo.png" alt="Logo CISS" class="logo" onerror="this.onerror=null;this.src='https://placehold.co/150x50/003366/FFFFFF?text=Logo';" />
    <div class="brand">NF-e Viewer</div>
    <h1>Carregar XML de NF-e</h1>

    <div class="custom-file">
      <label for="fileInput" class="custom-label">Selecionar arquivo XML</label>
      <input type="file" id="fileInput" accept=".xml">
    </div>

    <!-- Novo Quadro: O que a ferramenta faz -->
    <div id="tool-description-card" class="card">
      <div class="card-header">O que o NF-e Viewer faz?</div>
      <div class="card-body">
        <p>O <strong>NF-e Viewer</strong> é uma ferramenta simples e eficiente para você visualizar o conteúdo de arquivos XML de Notas Fiscais Eletrônicas (NF-e) diretamente no seu navegador. Sem instalações ou cadastros!</p>
        <p>Basta selecionar o arquivo XML da sua NF-e e a ferramenta irá extrair e apresentar de forma organizada todas as informações importantes, como dados do emitente e destinatário, lista de produtos/serviços, valores, impostos e muito mais. Além disso, você tem a opção de <strong>gerar o DANFE</strong> (Documento Auxiliar da Nota Fiscal Eletrônica) para impressão ou visualização rápida. Tenha controle e clareza sobre suas notas fiscais em segundos.</p>
      </div>
    </div>

    <!-- Seção de Conteúdo Principal: XML, DANFE e Curiosidades (agora dentro de upload-section) -->
    <div id="main-info-content" class="container mt-4">
      <h1>XML, DANFE e Curiosidades da NF-e</h1>
      <p>A Nota Fiscal Eletrônica (NF-e) revolucionou a forma como as empresas documentam suas operações comerciais. Mas você sabe o que é o XML e o DANFE, e algumas curiosidades sobre esse documento tão importante?</p>

      <h2>O que é o XML da NF-e?</h2>
      <p>O XML (eXtensible Markup Language) é o formato padrão e legal da Nota Fiscal Eletrônica. Ele é um arquivo digital que contém todas as informações fiscais da operação, como dados do emitente e destinatário, produtos/serviços, valores, impostos, e a assinatura digital que garante sua autenticidade e integridade. É o arquivo XML que tem validade jurídica e deve ser armazenado por um período mínimo de 5 anos.</p>
      <p>Diferente de um PDF, o XML é estruturado de forma a ser facilmente lido e processado por sistemas de computador, permitindo a automação da escrituração fiscal e contábil.</p>

      <h2>E o DANFE?</h2>
      <p>O DANFE (Documento Auxiliar da Nota Fiscal Eletrônica) é uma representação gráfica simplificada do XML da NF-e. Ele não é a nota fiscal em si, mas um documento auxiliar que acompanha a mercadoria em trânsito e contém as informações essenciais da NF-e, como chave de acesso, dados do emitente e destinatário, descrição dos produtos e valores totais.</p>
      <p>O DANFE serve para:</p>
      <ul>
          <li>Acompanhar o transporte da mercadoria.</li>
          <li>Permitir a consulta da NF-e original no site da Secretaria da Fazenda (SEFAZ) através da chave de acesso.</li>
          <li>Auxiliar na conferência da mercadoria no recebimento.</li>
      </ul>
      <p>É importante lembrar que o DANFE sem o seu respectivo XML não tem validade fiscal.</p>

      <h2>Curiosidades sobre a NF-e</h2>
      <ul>
          <li><strong>Redução da Burocracia:</strong> A NF-e foi criada para substituir os talões de notas fiscais em papel, reduzindo custos com impressão, armazenamento e envio, além de agilizar o processo de fiscalização.</li>
          <li><strong>Chave de Acesso:</strong> Cada NF-e possui uma chave de acesso única de 44 dígitos. Essa chave é fundamental para consultar a validade e autenticidade da nota no portal da SEFAZ.</li>
          <li><strong>Assinatura Digital:</strong> A validade jurídica da NF-e é garantida pela assinatura digital do emitente, que utiliza um certificado digital. Isso assegura a autoria e a integridade do documento.</li>
          <li><strong>Eventos da NF-e:</strong> Além da emissão, a NF-e pode ter diversos "eventos" associados, como Carta de Correção Eletrônica (CC-e), Cancelamento, Manifestação do Destinatário (Ciência da Emissão, Confirmação da Operação, Desconhecimento da Operação, Operação Não Realizada).</li>
          <li><strong>Armazenamento Obrigatório:</strong> Tanto o emitente quanto o destinatário da NF-e são obrigados a armazenar o arquivo XML por um período mínimo de 5 anos, contados a partir da data de emissão.</li>
          <li><strong>Benefícios Ambientais:</strong> A digitalização da nota fiscal contribuiu significativamente para a redução do consumo de papel.</li>
      </ul>
    </div>
  </div>

  <!-- Seção do Visualizador de NF-e (inicialmente oculta) -->
  <div id="viewer-section" class="container mt-4">
    <div id="header" class="mb-4">
      <!-- O cabeçalho da nota será injetado aqui pelo JS -->
    </div>
    <div class="row">
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">Produtos/Serviços</div>
          <ul id="productList" class="list-group list-group-flush"></ul>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card">
          <div class="card-header">Detalhes do Produto/Serviço</div>
          <div id="productDetails" class="card-body">
            <p class="text-center">Selecione um produto para ver os detalhes.</p>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center mt-4">
        <button id="backToUploadBtn" class="btn btn-back-to-upload">Voltar para Carregar XML</button>
        <button id="generateDanfeBtn" class="btn btn-generate-danfe">Gerar DANFE</button>
    </div>
  </div>

  <!-- Novas Seções de Conteúdo (ocultas por padrão) -->

  <!-- Seção Sobre -->
  <div id="about-section" class="content-section container">
    <h1>Sobre o NF-e Viewer</h1>
    <p>O NF-e Viewer é uma ferramenta online gratuita desenvolvida para simplificar a visualização e análise de arquivos XML de Notas Fiscais Eletrônicas (NF-e). Nosso objetivo é proporcionar uma maneira rápida e eficiente para que empresas e indivíduos possam inspecionar o conteúdo de suas NF-e sem a necessidade de softwares complexos ou conhecimentos técnicos aprofundados.</p>
    <p>Com uma interface intuitiva, você pode carregar seu arquivo XML e ter acesso imediato aos detalhes da nota, como informações do emitente, destinatário, produtos/serviços, valores e muito mais. Acreditamos que a transparência e o acesso fácil à informação fiscal são cruciais para a gestão eficiente.</p>
    <p>Estamos constantemente trabalhando para melhorar e expandir as funcionalidades do NF-e Viewer, sempre com foco na usabilidade e na segurança dos dados.</p>
    <div class="text-center mt-4">
        <button class="btn btn-back-to-main btn-back-to-upload">Voltar</button>
    </div>
  </div>

  <!-- Seção Política de Privacidade -->
  <div id="privacy-policy-section" class="content-section container">
    <h1>Política de Privacidade</h1>
    <p>A sua privacidade é de extrema importância para nós. Esta Política de Privacidade descreve como o NF-e Viewer coleta, usa e protege suas informações.</p>
    <h2>Coleta de Dados</h2>
    <p>O NF-e Viewer é uma aplicação que funciona <strong>inteiramente no seu navegador</strong>. Isso significa que:</p>
    <ul>
        <li><strong>Não coletamos, armazenamos ou transmitimos seus arquivos XML de NF-e.</strong> Todo o processamento dos dados do XML ocorre localmente no seu dispositivo.</li>
        <li>Não solicitamos nem armazenamos informações pessoais identificáveis, como nome, e-mail, CPF/CNPJ ou dados bancários.</li>
        <li>Não utilizamos cookies para rastreamento de usuários ou para coletar informações sobre sua navegação.</li>
    </ul>
    <h2>Uso de Dados</h2>
    <p>As informações contidas nos arquivos XML que você carrega são utilizadas exclusivamente para a visualização e análise dentro do seu navegador. Uma vez que você fecha a página ou carrega um novo arquivo, os dados do XML anterior são descartados da memória.</p>
    <h2>Segurança</h2>
    <p>Implementamos medidas de segurança para proteger a integridade de nossa aplicação, mas é importante ressaltar que a segurança dos dados do XML depende do seu próprio dispositivo, já que o processamento é local.</p>
    <h2>Alterações na Política de Privacidade</h2>
    <p>Podemos atualizar nossa Política de Privacidade periodicamente. Recomendamos que você revise esta página para quaisquer alterações. As alterações são efetivas quando publicadas nesta página.</p>
    <div class="text-center mt-4">
        <button class="btn btn-back-to-main btn-back-to-upload">Voltar</button>
    </div>
  </div>

  <!-- Seção Termos de Uso -->
  <div id="terms-of-use-section" class="content-section container">
    <h1>Termos de Uso</h1>
    <p>Bem-vindo ao NF-e Viewer. Ao utilizar esta ferramenta, você concorda com os seguintes termos e condições:</p>
    <h2>1. Uso da Ferramenta</h2>
    <p>O NF-e Viewer é fornecido como um serviço gratuito para visualização de arquivos XML de Notas Fiscais Eletrônicas (NF-e). Você é responsável pelo uso dos arquivos que carrega e pela conformidade com as leis e regulamentos aplicáveis.</p>
    <h2>2. Processamento de Dados</h2>
    <p>Todo o processamento dos arquivos XML ocorre no seu navegador. O NF-e Viewer não coleta, armazena ou transmite seus dados de NF-e para nossos servidores. Sua privacidade é garantida pelo processamento local.</p>
    <h2>3. Isenção de Garantias</h2>
    <p>A ferramenta é fornecida "como está", sem garantias de qualquer tipo, expressas ou implícitas. Não garantimos que a ferramenta será ininterrupta, livre de erros ou que os resultados obtidos com seu uso serão precisos ou confiáveis.</p>
    <h2>4. Limitação de Responsabilidade</h2>
    <p>Em nenhuma circunstância o NF-e Viewer ou seus criadores serão responsáveis por quaisquer danos diretos, indiretos, incidentais, especiais ou consequenciais decorrentes do uso ou da incapacidade de usar a ferramenta.</p>
    <h2>5. Alterações nos Termos</h2>
    <p>Reservamo-nos o direito de modificar estes Termos de Uso a qualquer momento. O uso continuado da ferramenta após a publicação de alterações constitui sua aceitação dos termos revisados.</p>
    <div class="text-center mt-4">
        <button class="btn btn-back-to-main btn-back-to-upload">Voltar</button>
    </div>
  </div>

  <!-- Seção Contato -->
  <div id="contact-section" class="content-section container">
    <h1>Contato</h1>
    <p>Se você tiver dúvidas, sugestões ou precisar de suporte, entre em contato conosco.</p>
    <p>Você pode nos enviar um e-mail para: <a href="mailto:suporte@nfeviewer.com.br">suporte@nfeviewer.com.br</a></p>
    <p>Agradecemos seu feedback e faremos o possível para responder o mais breve possível.</p>
    <div class="text-center mt-4">
        <button class="btn btn-back-to-main btn-back-to-upload">Voltar</button>
    </div>
  </div>

  <!-- Rodapé da Página -->
  <footer class="footer">
    <div>
      © 2025 NF-e Viewer. Todos os direitos reservados.
    </div>
    <div class="mt-2">
      <a href="#" id="link-about">Sobre</a> |
      <a href="#" id="link-privacy">Política de Privacidade</a> |
      <a href="#" id="link-terms">Termos de Uso</a> |
      <a href="#" id="link-contact">Contato</a>
    </div>
  </footer>

  <!-- Link para o Bootstrap JS (com Popper.js) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Link para a biblioteca JSZip (para descompactar arquivos ZIP) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <!-- Nosso script principal -->
  <script src="main.js"></script>
  <script>
    // Este script deve ser integrado ao seu 'main.js' para melhor organização.
    // Ele gerencia a visibilidade das diferentes seções da página.

    document.addEventListener('DOMContentLoaded', () => {
        const uploadSection = document.getElementById('upload-section');
        const viewerSection = document.getElementById('viewer-section');
        const aboutSection = document.getElementById('about-section');
        const privacySection = document.getElementById('privacy-policy-section');
        const termsSection = document.getElementById('terms-of-use-section');
        const contactSection = document.getElementById('contact-section');
        // mainInfoContent e toolDescriptionCard agora estão dentro de uploadSection,
        // então não precisam ser gerenciados separadamente aqui, pois sua visibilidade
        // será controlada pela visibilidade de uploadSection.

        const fileInput = document.getElementById('fileInput');
        const backToUploadBtn = document.getElementById('backToUploadBtn');
        const generateDanfeBtn = document.getElementById('generateDanfeBtn');
        const backToMainButtons = document.querySelectorAll('.btn-back-to-main');

        const linkAbout = document.getElementById('link-about');
        const linkPrivacy = document.getElementById('link-privacy');
        const linkTerms = document.getElementById('link-terms');
        const linkContact = document.getElementById('link-contact');

        // Função para mostrar uma seção e esconder as outras
        function showSection(sectionToShow) {
            const allSections = [uploadSection, viewerSection, aboutSection, privacySection, termsSection, contactSection];

            allSections.forEach(section => {
                if (section) {
                    section.style.display = 'none';
                }
            });

            if (sectionToShow) {
                if (sectionToShow === uploadSection || sectionToShow === aboutSection || sectionToShow === privacySection || sectionToShow === termsSection || sectionToShow === contactSection) {
                    sectionToShow.style.display = 'flex';
                } else if (sectionToShow === viewerSection) {
                    sectionToShow.style.display = 'block';
                }
            }
        }

        // Event listener para o input de arquivo
        if (fileInput) {
            fileInput.addEventListener('change', (event) => {
                if (event.target.files.length > 0) {
                    console.log('Arquivo selecionado:', event.target.files[0].name);
                    // Em um cenário real, você processaria o XML aqui e preencheria o visualizador.

                    showSection(viewerSection); // Exibe a seção do visualizador
                }
            });
        }

        // Event listener para o botão "Gerar DANFE"
        if (generateDanfeBtn) {
            generateDanfeBtn.addEventListener('click', () => {
                console.log('Botão Gerar DANFE clicado! Implementar lógica de geração de DANFE aqui.');
                alert('Funcionalidade de Gerar DANFE ainda não implementada. Verifique o console para a mensagem.');
            });
        }

        // Event listeners para os links do rodapé
        linkAbout.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(aboutSection);
        });

        linkPrivacy.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(privacySection);
        });

        linkTerms.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(termsSection);
        });

        linkContact.addEventListener('click', (e) => {
            e.preventDefault();
            showSection(contactSection);
        });

        // Event listener para o botão "Voltar para Carregar XML" na seção do visualizador
        if (backToUploadBtn) {
            backToUploadBtn.addEventListener('click', () => {
                showSection(uploadSection);
            });
        }

        // Event listeners para os botões "Voltar" nas novas seções de conteúdo
        backToMainButtons.forEach(button => {
            button.addEventListener('click', () => {
                showSection(uploadSection); // Volta para a seção de upload principal
            });
        });

        // Garante que a seção de upload (e, portanto, as curiosidades e o novo quadro)
        // esteja visível por padrão ao carregar a página.
        showSection(uploadSection);
    });
  </script>
</body>
</html>
